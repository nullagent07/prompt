########################################
# Hugging Face / Network
########################################

# Если модели gated/private — вставь токен. Иначе оставь пустым.
HF_TOKEN=

# Корпоративный proxy (у тебя Kerio)
HTTP_PROXY=http://control2.nestro.ru:3128
HTTPS_PROXY=http://control2.nestro.ru:3128

# Важно: НЕ добавляй сюда docker.io/registry-1.docker.io в твоей сети,
# иначе снова будут таймауты pull.
NO_PROXY=localhost,127.0.0.1,::1

########################################
# vLLM (LLM service) — под H100 80GB
########################################

# Модель (для RU хорошо; 32B на H100 80GB нормально)
LLM_MODEL_ID=Qwen/Qwen2.5-32B-Instruct

# Имя модели в /v1/models (как будет показываться клиентам)
LLM_SERVED_NAME=llm

# dtype: auto обычно выберет bf16 на H100; можешь фиксировать bfloat16
LLM_DTYPE=auto

# Доля VRAM под модель+KV cache (с учетом того, что у тебя еще TEI emb+rerk на той же GPU)
# Для "всё на одной H100" безопаснее 0.88–0.92, чтобы избежать OOM.
LLM_GPU_MEM_UTIL=0.90

# Контекст (начни с 8192, потом поднимай при необходимости)
LLM_MAX_LEN=8192

# Если увидишь странные проблемы с графом/ядром — включай eager
LLM_ENFORCE_EAGER=false

# prefix caching полезен для RAG (ускоряет повторяющиеся префиксы)
LLM_PREFIX_CACHE=true

# Swap-space в ГБ (использует RAM, у тебя её много)
LLM_SWAP_GB=16

# Логи vLLM
VLLM_LOGGING_LEVEL=INFO

########################################
# TEI Embeddings — под RU (multilingual)
########################################

EMB_MODEL_ID=BAAI/bge-m3
EMB_DTYPE=float16

# batching: H100 тянет больше, но не завышай сразу.
EMB_MAX_BATCH_TOKENS=8192
EMB_MAX_CONCURRENCY=64

########################################
# TEI Reranker — под RU (multilingual)
########################################

RERANK_MODEL_ID=BAAI/bge-reranker-v2-m3
RERANK_DTYPE=float16

# rerank обычно тяжелее embeddings по compute, поэтому чуть меньше batch/concurrency
RERANK_MAX_BATCH_TOKENS=4096
RERANK_MAX_CONCURRENCY=32

########################################
# Prometheus retention
########################################

# хранение метрик
PROM_RETENTION=15d

########################################
# Grafana admin
########################################

# ОБЯЗАТЕЛЬНО поменяй пароль перед любым "почти-продом"
GRAFANA_USER=admin
GRAFANA_PASS=ChangeMe_Strong_Password

